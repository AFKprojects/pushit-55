# ButtonApp

Status: In Progress
Owner: AFK Studio
Completion: 0
Description: Wprowadzenie:
Ten dokument stanowi rozszerzonÄ… wersjÄ™ dokumentacji aplikacji PushÂ It!.  Oparty jest na pierwotnym materiale wygenerowanym w narzÄ™dziu Lovable i zostaÅ‚ uzupeÅ‚niony o najnowsze zmiany w projekcie.  Kluczowym dodatkiem jest nowy mechanizm gÅ‚osowania poprzez przytrzymanie przycisku â€“ ankiety w aplikacji korzystajÄ… teraz z tej samej logiki co globalny przycisk â€žPushÂ It!â€, dziÄ™ki czemu uÅ¼ytkownicy zawsze widzÄ…, ile osÃ³b w danym momencie wspÃ³lnie trzyma przycisk (zarÃ³wno w sekcji TheÂ Button, jak i w ankietach).  Dokumentacja zachowuje ukÅ‚ad i kolejnoÅ›Ä‡ sekcji oryginaÅ‚u, aby Å‚atwo moÅ¼na byÅ‚o Å›ledziÄ‡ rozwÃ³j funkcji.
Priority: High
ðŸª¬ Stack: Notion (https://www.notion.so/Notion-1dc35605529c8073b23ce224e7fbdbcb?pvs=21), Cursor (https://www.notion.so/Cursor-1dc35605529c80be9f85c1e729d728ae?pvs=21), Supabase (https://www.notion.so/Supabase-1df35605529c806187c5ce8a5946360a?pvs=21), GitHub (https://www.notion.so/GitHub-1f935605529c80b4b8c1cf7bbdb4c54a?pvs=21), Lovable (https://www.notion.so/Lovable-1df35605529c80cbb1fbf84d8a9f1b55?pvs=21), Chatgpt (https://www.notion.so/Chatgpt-1dc35605529c80d7a717c8bafb6daa5c?pvs=21)

# Opis ogÃ³lny aplikacji

**Push It!** to interaktywna platforma ankietowa dziaÅ‚ajÄ…ca w czasie rzeczywistym. UmoÅ¼liwia tworzenie i udziaÅ‚ w krÃ³tkich, spoÅ‚ecznoÅ›ciowych gÅ‚osowaniach. Idealna do szybkiego zbierania opinii lub zabawy w ankiety.

### Dla kogo?

Aplikacja jest skierowana do:

- **TwÃ³rcÃ³w ankiet** â€“ osÃ³b, ktÃ³re chcÄ… zadaÄ‡ pytanie spoÅ‚ecznoÅ›ci,
- **GÅ‚osujÄ…cych** â€“ uÅ¼ytkownikÃ³w oddajÄ…cych gÅ‚osy i Å›ledzÄ…cych wyniki.

### GÅ‚Ã³wne funkcje:

- **Tworzenie i udziaÅ‚ w ankietach** â€“ kaÅ¼dy zarejestrowany uÅ¼ytkownik moÅ¼e tworzyÄ‡ ankiety i gÅ‚osowaÄ‡.
- **Wyniki na Å¼ywo** â€“ liczba gÅ‚osÃ³w aktualizuje siÄ™ automatycznie, bez odÅ›wieÅ¼ania strony.
- **System boostowania ankiet** â€“ uÅ¼ytkownicy mogÄ… promowaÄ‡ ankiety, zwiÄ™kszajÄ…c ich zasiÄ™g (dawniej: system "push").
- **Grywalizacja** â€“ odznaki i statystyki dla najbardziej aktywnych uÅ¼ytkownikÃ³w.

### PotencjaÅ‚ viralowy â€“ siÅ‚a przycisku â€žPush It!â€

Jednym z kluczowych elementÃ³w viralowego potencjaÅ‚u aplikacji jest globalny przycisk **â€žPush It!â€** â€“ prosty, ale niezwykle angaÅ¼ujÄ…cy mechanizm. UÅ¼ytkownik przytrzymujÄ…c przycisk, widzi w czasie rzeczywistym, ilu innych ludzi na Å›wiecie robi to samo. Ten pozornie niewinny gest uruchamia silny **efekt FOMO (fear of missing out)** â€“ uÅ¼ytkownicy nie chcÄ… â€žprzegapiÄ‡ momentuâ€, kiedy wszyscy sÄ… aktywni jednoczeÅ›nie.

To dziaÅ‚a, bo:

- **Tworzy wspÃ³lne doÅ›wiadczenie** â€“ uÅ¼ytkownicy czujÄ…, Å¼e uczestniczÄ… w czymÅ› wiÄ™kszym niÅ¼ tylko klikniÄ™cie.
- **Budzi ciekawoÅ›Ä‡ i uzaleÅ¼nia** â€“ â€žczy ktoÅ› trzyma przycisk teraz?â€, â€žile osÃ³b byÅ‚o dziÅ› aktywnych?â€.
- **ZachÄ™ca do powrotÃ³w i dzielenia siÄ™** â€“ uÅ¼ytkownicy chcÄ… pokazaÄ‡ znajomym momenty z najwiÄ™kszÄ… aktywnoÅ›ciÄ….
- **Naturalny impuls do udostÄ™pniania** â€“ zrzuty ekranu i statystyki z przycisku Å›wietnie sprawdzajÄ… siÄ™ w social media.

Ten mechanizm Å‚Ä…czy prostotÄ™ z emocjÄ…, co czyni go doskonaÅ‚ym zapalnikiem do wirusowego rozprzestrzeniania siÄ™ aplikacji.

### Technologia

Aplikacja jest obecnie w fazie **MVP** (Minimum Viable Product) i zostaÅ‚a zbudowana z wykorzystaniem nowoczesnych technologii:

- **Frontend**: React + TypeScript
- **Backend**: Supabase (PostgreSQL, autentykacja, funkcje czasu rzeczywistego)

DziÄ™ki temu wszystkie dziaÅ‚ania â€“ tworzenie ankiet, gÅ‚osowanie, aktualizacja statystyk â€“ sÄ… synchronizowane w czasie rzeczywistym.

### Dokumentacja

Obejmuje zarÃ³wno obecne funkcje aplikacji, jak i planowane rozszerzenia (roadmapÄ™) na kolejne etapy rozwoju.

# Workflow uÅ¼ytkownika

## GÅ‚Ã³wne Å›cieÅ¼ki uÅ¼ytkownika

W aplikacji **Push It!** dostÄ™pne sÄ… cztery kluczowe Å›cieÅ¼ki uÅ¼ytkownika:

1. **GÅ‚osowanie w ankietach**
2. **Tworzenie wÅ‚asnych ankiet**
3. **Boostowanie (promowanie) ankiet**
4. **Przytrzymywanie globalnego przycisku â€žPush It!â€** â€“ dla zabawy i efektu FOMO

PoniÅ¼ej opisane sÄ… szczegÃ³Å‚owo wszystkie scenariusze.

---

### ðŸ—³ GÅ‚osowanie w ankiecie

Po zalogowaniu uÅ¼ytkownik trafia do gÅ‚Ã³wnego feedu ankiet i wybiera interesujÄ…cÄ… go ankietÄ™. WyÅ›wietlane sÄ… pytanie i dostÄ™pne opcje odpowiedzi. Aby zagÅ‚osowaÄ‡:

1. **Kliknij i przytrzymaj wybranÄ… opcjÄ™.**
2. **Odliczanie (3, 2, 1)** â€“ pojawia siÄ™ animowany ekran, ktÃ³ry informuje, Å¼e gÅ‚os zostanie oddany po 3 sekundach ciÄ…gÅ‚ego trzymania przycisku.
3. **WspÃ³lne trzymanie** â€“ po odliczaniu uÅ¼ytkownik widzi, **ile osÃ³b w tym samym momencie rÃ³wnieÅ¼ trzyma przycisk** (zarÃ³wno w ankietach, jak i globalny przycisk â€žPush It!â€).
4. **Zwolnienie = gÅ‚os** â€“ puszczenie przycisku po 3 sekundach rejestruje gÅ‚os. Zwolnienie wczeÅ›niej anuluje caÅ‚Ä… akcjÄ™.

### Dodatkowe funkcje:

- **Wyniki widoczne dopiero po gÅ‚osie** â€“ aby nie wpÅ‚ywaÄ‡ na niezdecydowanych.
- **Jednorazowa korekta** â€“ uÅ¼ytkownik moÅ¼e poprawiÄ‡ swÃ³j gÅ‚os tylko raz, potem zmiana nie jest moÅ¼liwa.
- **GoÅ›Ä‡ (tryb read-only)** â€“ niezalogowani mogÄ… przeglÄ…daÄ‡ ankiety, ale nie mogÄ… gÅ‚osowaÄ‡ ani tworzyÄ‡ ankiet.
- **Zapis i ukrycie ankiet** â€“ ankiety moÅ¼na dodaÄ‡ do ulubionych lub ukryÄ‡, aby dopasowaÄ‡ feed.

System gÅ‚osowania bazuje na **mechanizmie heartbeat/cleanup**, ktÃ³ry usuwa nieaktywne sesje (np. w przypadku utraty poÅ‚Ä…czenia), aby zapobiec tzw. *ghost sessions*.

---

### âœï¸ Tworzenie ankiety

KaÅ¼dy zalogowany uÅ¼ytkownik moÅ¼e utworzyÄ‡ ankietÄ™:

1. WejdÅº w **sekcjÄ™ Create** (ikona â€ž+â€ w dolnym menu).
2. WypeÅ‚nij formularz: pytanie, co najmniej 2 odpowiedzi oraz opcjÄ™ **â€žPokaÅ¼ nazwÄ™ twÃ³rcyâ€** (anonimowoÅ›Ä‡ zaleÅ¼y od ustawienia).
3. ZatwierdÅº formularz â€“ ankieta natychmiast trafia do feedu jako aktywna.

### Zasady:

- **Czas trwania** â€“ kaÅ¼da ankieta jest aktywna przez 24 godziny.
- **Brak edycji po publikacji** â€“ pytanie i odpowiedzi sÄ… niezmienialne, aby zachowaÄ‡ integralnoÅ›Ä‡ gÅ‚osowania.
- **TwÃ³rca nie moÅ¼e gÅ‚osowaÄ‡ we wÅ‚asnej ankiecie** â€“ od razu widzi wyniki (0% na starcie), ale nie moÅ¼e oddaÄ‡ gÅ‚osu.
- **Wyniki aktualizujÄ… siÄ™ w czasie rzeczywistym** â€“ twÃ³rca i inni uÅ¼ytkownicy widzÄ… postÄ™py na Å¼ywo.

---

### ðŸš€ Boostowanie (promowanie) ankiety

Boostowanie pozwala uÅ¼ytkownikom zwiÄ™kszaÄ‡ zasiÄ™g ankiet i wpÅ‚ywaÄ‡ na ich pozycjÄ™ w sekcji **Hot**.

- KaÅ¼dy uÅ¼ytkownik ma **3 boosty dziennie** (limit odnawia siÄ™ o pÃ³Å‚nocy UTC, niewykorzystane boosty przepadajÄ…).
- Boost moÅ¼na wykorzystaÄ‡ zarÃ³wno na **cudzÄ…**, jak i **wÅ‚asnÄ… ankietÄ™**.

W interfejsie odbywa siÄ™ to przyciskiem (np. ikona rakiety). Po uÅ¼yciu:

- pojawia siÄ™ komunikat (â€žPoll pushed! ðŸš€â€),
- licznik boostÃ³w zmniejsza siÄ™ o 1,
- `push_count` ankiety roÅ›nie, a jej pozycja w sekcji Hot wzrasta.

Boostowanie jest ograniczone dziennym limitem, by zapobiec spamowaniu.

---

### ðŸŒ Globalny przycisk â€žPush It!â€

Globalny przycisk **â€žPush It!â€** to funkcja spoÅ‚ecznoÅ›ciowa i zabawowa.

- MoÅ¼na go nacisnÄ…Ä‡ i **przytrzymaÄ‡ w dowolnym momencie**, niezaleÅ¼nie od ankiet.
- W czasie trzymania przycisku uÅ¼ytkownik widzi **ile osÃ³b na caÅ‚ym Å›wiecie robi to samo w tym samym momencie**.
- Funkcja dziaÅ‚a jak **spoÅ‚eczny gadÅ¼et** â€“ nie ma celu uÅ¼ytkowego, ale budzi ciekawoÅ›Ä‡, generuje **efekt FOMO** i zachÄ™ca do powrotÃ³w.
- Aby skorzystaÄ‡ z funkcji naleÅ¼y byÄ‡ zalogowanym

Przycisk ten korzysta z tego samego systemu heartbeat/cleanup, co gÅ‚osowanie w ankietach, co zapewnia aktualne dane w czasie rzeczywistym.

# Opis ekranÃ³w aplikacji

Aplikacja mobilna **Push It!** skÅ‚ada siÄ™ z piÄ™ciu gÅ‚Ã³wnych ekranÃ³w, dostÄ™pnych w staÅ‚ym dolnym menu:

- **The Button**
- **Vote**
- **Create**
- **Stats**
- **My App**

PoniÅ¼ej szczegÃ³Å‚owy opis funkcji kaÅ¼dego z tych ekranÃ³w:

Do zmiany!!!

```mermaid
graph TD
  %% GÅ‚Ã³wne ekrany
  A[button_page]
  B[feed_page]
  C[create_page]
  D[statistics_page]
  E[myapp_page]

  %% Feed tabs
  B --> B1[feed_live_tab]
  B1 --> B1a[polview_modal]
  B --> B2[feed_archive_tab]

  %% Statistics tabs
  D --> D1[statistics_daily_tab]
  D --> D2[statistics_monthly_tab]
  D --> D3[statistics_hot_tab]

  %% MyApp tabs
  E --> E1[mypolls_tab]
  E1 --> E1a[mypolls_created_subtab]
  E1 --> E1b[mypolls_voted_subtab]
  E1 --> E1c[mypolls_saved_subtab]

  E --> E2[community_tab]

  E --> E3[profile_tab]
  E3 --> E3a[profile_account_subtab]
  E3 --> E3b[profile_settings_subtab]

  %% System views
  F[system_views]

  F --> F1[modals]
  F1 --> F1a[polview_modal]
  F1 --> F1b[profile_modal]

  F --> F2[real_time]
  F2 --> F2a[countdown_overlay]
  F2 --> F2b[counter_overlay]

  F --> F3[successes]
  F3 --> F3a[polladd_success]
  F3 --> F3b[vote_success]

  F --> F4[errors]
  F4 --> F4a[polladd_error]

```

[AppViews](AppViews%2024035605529c8068a7dfd0479bda577c.csv)

## 1. The Button (globalny przycisk)

**Cel:** SpoÅ‚ecznoÅ›ciowa zabawa niezwiÄ…zana bezpoÅ›rednio z ankietami.

**Interakcja:**

- Po wybraniu tej sekcji uÅ¼ytkownik widzi pomaraÅ„czowy przycisk **â€žPush It!â€** i instrukcjÄ™:
    
    â€žPrzytrzymaj przycisk przez 3 sekundy, aby zobaczyÄ‡, ile osÃ³b na Å›wiecie robi to samo co Ty.â€
    
- Po przytrzymaniu przycisku aplikacja inicjuje sesjÄ™ i korzystajÄ…c z mechanizmu **heartbeat** okresowo synchronizuje informacje o aktywnych uÅ¼ytkownikach.
- Po 3 sekundach uÅ¼ytkownik otrzymuje komunikat, np.:
    
    > â€žX osÃ³b na Å›wiecie trzyma przycisk jednoczeÅ›nie!â€
    > 
- UÅ¼ytkownik moÅ¼e kontynuowaÄ‡ trzymanie przycisku, liczba osÃ³b aktualizuje siÄ™ w czasie rzeczywistym.

**Dane z sesji:**

- SÅ‚uÅ¼Ä… wyÅ‚Ä…cznie celom statystycznym i zabawowym.
- ZasilajÄ… dzienne zestawienia i rekordy w sekcji **Stats**.

**Uwagi techniczne:**

- DokÅ‚adna czÄ™stotliwoÅ›Ä‡ heartbeat jest definiowana przez zespÃ³Å‚ developerski i nie jest ustalana w dokumentacji.

**Inspiracja:** Eksperymenty spoÅ‚ecznoÅ›ciowe (np. redditowe â€žThe Buttonâ€).

---

## 2. Vote (feed ankiet)

**Cel:** PrzeglÄ…danie i udziaÅ‚ w ankietach spoÅ‚ecznoÅ›ci.

### 2.1. Widok gÅ‚Ã³wny

- Lista **aktywnych** ankiet.
- Filtry/sortowanie:
    - **Hot** â€“ trendujÄ…ce (najwiÄ™cej boostÃ³w)
    - **Popular** â€“ najwiÄ™cej gÅ‚osÃ³w
    - **New** â€“ najnowsze
- PrzeÅ‚Ä…cznik **Live / Archive**:
    - **Live** â€“ ankiety w trakcie gÅ‚osowania
    - **Archive** â€“ zakoÅ„czone ankiety (wyniki tylko do wglÄ…du)

### 2.2. Karta ankiety

- **Pytanie**
- **Opcje odpowiedzi** (procentowo lub liczbowo, w zaleÅ¼noÅ›ci od stanu gÅ‚osowania)
- **Autor** (jeÅ›li wybrano opcjÄ™ publikacji nazwy)
- **Statystyki aktywnoÅ›ci:** liczba gÅ‚osÃ³w, liczba boostÃ³w
- **Statusy:**
    - â€žVotedâ€ â€“ jeÅ›li uÅ¼ytkownik juÅ¼ gÅ‚osowaÅ‚
    - â€žPushedâ€ â€“ jeÅ›li uÅ¼ytkownik zboostowaÅ‚

### 2.3. GÅ‚osowanie

- KlikniÄ™cie i przytrzymanie wybranej opcji przez 3 sekundy (jak przycisk **Push It!**).
- W trakcie odliczania pokazuje siÄ™ liczba osÃ³b gÅ‚osujÄ…cych lub trzymajÄ…cych globalny przycisk.
- Zwolnienie przycisku po odliczeniu â€“ rejestruje gÅ‚os; zwolnienie wczeÅ›niej â€“ anuluje.
- **Edycja gÅ‚osu:** jednorazowa, po zmianie dalsze poprawki sÄ… zablokowane.

### 2.4. Dodatkowe akcje na karcie

- **Boost** (ikona rakiety) â€“ promowanie ankiety
- **Save** (ikona gwiazdki) â€“ dodanie do ulubionych
- **Hide** (ikona przekreÅ›lonego oka) â€“ ukrycie ankiety z feedu

---

## 3. Create (tworzenie ankiety)

**DostÄ™p:** Ikona **â€ž+â€** w dolnym menu.

### 3.1. Formularz (modal)

- **Pytanie** â€“ krÃ³tka, jasna treÅ›Ä‡ ankiety
- **Opcje odpowiedzi** â€“ min. 2 pola, moÅ¼liwoÅ›Ä‡ dodawania kolejnych
- **WidocznoÅ›Ä‡ autora** â€“ przeÅ‚Ä…cznik anonimowoÅ›ci (pokazanie/ukrycie nazwy)

### 3.2. Publikacja

- Po zatwierdzeniu ankieta:
    - zostaje opublikowana i jest aktywna przez **24 godziny**,
    - pojawia siÄ™ w zakÅ‚adce **New**,
    - po boostowaniu rÃ³wnieÅ¼ w **Hot**.
- TwÃ³rca **nie moÅ¼e gÅ‚osowaÄ‡** we wÅ‚asnej ankiecie (widzi tylko wyniki).
- Brak moÅ¼liwoÅ›ci edycji pytania lub opcji po publikacji.
- Po publikacji modal zamyka siÄ™, uÅ¼ytkownik pozostaje w feedzie.

---

## 4. Stats (statystyki spoÅ‚ecznoÅ›ci)

**Cel:** Podsumowanie globalnej aktywnoÅ›ci.

### 4.1. Kluczowe wskaÅºniki

- **Community Members** â€“ liczba zarejestrowanych uÅ¼ytkownikÃ³w
- **Total Polls** â€“ liczba wszystkich ankiet
- **Total Votes** â€“ suma gÅ‚osÃ³w oddanych we wszystkich ankietach
- **Button Presses (24h)** â€“ wciÅ›niÄ™cia globalnego przycisku z ostatniej doby
- **Max Simultaneous (24h)** â€“ maks. jednoczesne trzymania przycisku w ostatnich 24h
- **All-Time Record** â€“ najwyÅ¼szy historyczny wynik wspÃ³lnego trzymania

### 4.2. Planowane rozszerzenia

- **Daily Stats** â€“ szczegÃ³Å‚owe zestawienia dzienne
- **Monthly Stats** â€“ miesiÄ™czne podsumowania
- **Hall of Fame** â€“ rekordowe ankiety i uÅ¼ytkownicy
- **Top Countries** â€“ kraje z najwiÄ™kszÄ… aktywnoÅ›ciÄ…

---

## 5. My App (konto i spoÅ‚ecznoÅ›Ä‡)

Ekran dzieli siÄ™ na trzy podzakÅ‚adki, ktÃ³re umoÅ¼liwiajÄ… zarzÄ…dzanie ankietami i interakcjÄ™ z innymi uÅ¼ytkownikami.

### 5.1. My Polls (Moje ankiety)

- **Created**
    - Lista ankiet utworzonych przez uÅ¼ytkownika
    - Oznaczenie aktywnych (np. zielona kropka) oraz czas do zakoÅ„czenia (np. â€ž23hâ€)
    - Link do **Archive** (zakoÅ„czone ankiety z koÅ„cowymi wynikami)
- **Voted**
    - Ankiety, w ktÃ³rych uÅ¼ytkownik oddaÅ‚ gÅ‚os
    - MoÅ¼liwoÅ›Ä‡ sprawdzenia ostatecznych wynikÃ³w
- **Saved**
    - Ankiety oznaczone jako ulubione
    - Prywatna lista do pÃ³Åºniejszego powrotu

### 5.2. Community (SpoÅ‚ecznoÅ›Ä‡)

- **Statystyki uÅ¼ytkownika:**
    - Followers, Following
    - Votes received, Boosts received
- **Lista obserwowanych i obserwujÄ…cych:**
    - KaÅ¼da pozycja wyÅ›wietla nazwÄ™ uÅ¼ytkownika
    - KlikniÄ™cie otwiera modal profilu z aktywnymi ankietami i statystykami
- **Wyszukiwanie i follow/unfollow:**
    - Wyszukiwarka przeszukuje profile po nazwie
    - KlikniÄ™cie â€žFollowâ€ lub â€žUnfollowâ€ aktualizuje relacjÄ™

### 5.3. Profile (Profil)

- **Dane konta:** email, nazwa uÅ¼ytkownika
- **Statystyki osobiste:** liczba utworzonych ankiet i otrzymanych gÅ‚osÃ³w
- **Your Badges:** lista zdobytych odznak (opis i data zdobycia)
- **Ustawienia:**
    - Wylogowanie (Sign Out)
    - Zmiana hasÅ‚a i inne opcje konta

# Struktura danych aplikacji

# Schemat bazy danych

Aplikacja **Push It!** wykorzystuje relacyjnÄ… bazÄ™ PostgreSQL (Supabase) do przechowywania wszystkich danych zwiÄ…zanych z uÅ¼ytkownikami, ankietami i aktywnoÅ›ciami. PoniÅ¼ej znajduje siÄ™ szczegÃ³Å‚owy opis kluczowych tabel, ich pÃ³l oraz wzajemnych relacji w formie opisowej.

---

## profiles (uÅ¼ytkownicy)

Tabela **profiles** przechowuje dane o kontach uÅ¼ytkownikÃ³w aplikacji. KaÅ¼dy rekord posiada unikalne `id`, `username`, `email`, `country` oraz `created_at`, wskazujÄ…ce datÄ™ zaÅ‚oÅ¼enia konta. Jest to gÅ‚Ã³wna tabela odniesienia â€“ w innych tabelach wystÄ™pujÄ… klucze obce wskazujÄ…ce na profile, np. twÃ³rcÄ™ ankiety, gÅ‚osujÄ…cego uÅ¼ytkownika czy autora sesji przycisku.

**Relacje:**

- polls.creator_id â†’ profiles.id (twÃ³rca ankiety)
- user_votes.user_id â†’ profiles.id (gÅ‚os oddany przez uÅ¼ytkownika)
- saved_polls.user_id, hidden_polls.user_id â†’ profiles.id (zapisane/ukryte ankiety)
- poll_boosts.user_id â†’ profiles.id (promowanie ankiet)
- button_holds.user_id â†’ profiles.id (sesje przycisku)
- user_follows.follower_id/followed_id â†’ profiles.id (relacje obserwowania)
- user_badges.user_id â†’ profiles.id (przyznane odznaki)

---

## polls (ankiety)

Tabela **polls** zawiera podstawowe dane kaÅ¼dej ankiety: unikalne `id`, tekst pytania (`question_text`), `creator_id` wskazujÄ…ce autora w tabeli profiles, znaczniki czasu `created_at` i `expires_at`, pole `status` okreÅ›lajÄ…ce, czy ankieta jest aktywna, wygasÅ‚a czy zarchiwizowana, a takÅ¼e bufory `push_count_cache` i `total_votes_cache` przyspieszajÄ…ce wyÅ›wietlanie liczby boostÃ³w i gÅ‚osÃ³w. Pole `is_anonymous` decyduje o tym, czy przy ankiecie ujawniany jest autor.

**Relacje:**
Ankieta moÅ¼e mieÄ‡ wiele opcji odpowiedzi (poll_options) oraz wiele gÅ‚osÃ³w (user_votes). KaÅ¼dy rekord polls.creator_id odnosi siÄ™ do tabeli profiles, wyznaczajÄ…c uÅ¼ytkownika, ktÃ³ry stworzyÅ‚ ankietÄ™.

---

## poll_options (opcje ankiety)

W tabeli **poll_options** przechowywane sÄ… moÅ¼liwe odpowiedzi dla kaÅ¼dej ankiety. KaÅ¼da opcja ma swÃ³j `id`, referencjÄ™ `poll_id` do tabeli polls, tekst odpowiedzi `option_text`, bieÅ¼Ä…cy licznik gÅ‚osÃ³w `votes` oraz `order_index`, ktÃ³ry ustala kolejnoÅ›Ä‡ wyÅ›wietlania.

**Relacje:**
KaÅ¼da opcja naleÅ¼y do jednej ankiety (poll_id â†’ polls.id) i moÅ¼e byÄ‡ powiÄ…zana z wieloma gÅ‚osami w tabeli user_votes.

---

## user_votes (gÅ‚osy)

Tabela **user_votes** rejestruje oddane gÅ‚osy. KaÅ¼dy rekord zawiera unikalne `id`, `user_id` wskazujÄ…ce gÅ‚osujÄ…cego z tabeli profiles, `poll_id` ankiety oraz `option_id` wybranej odpowiedzi. Pole `created_at` zapisuje moment oddania gÅ‚osu. Aplikacja gwarantuje, Å¼e istnieje maksymalnie jeden rekord na parÄ™ (user_id, poll_id) â€“ kaÅ¼da kolejna zmiana gÅ‚osu nadpisuje dotychczasowy wpis.

---

## saved_polls (ulubione ankiety)

Tabela **saved_polls** odwzorowuje relacjÄ™ wiele-do-wielu miÄ™dzy uÅ¼ytkownikami a ankietami, ktÃ³re oznaczyli jako ulubione. KaÅ¼dy wpis skÅ‚ada siÄ™ z `user_id`, `poll_id` oraz znacznika `saved_at`, wskazujÄ…cego moment dodania do ulubionych.

---

## hidden_polls (ukryte ankiety)

Podobnie jak saved_polls, tabela **hidden_polls** przechowuje powiÄ…zania uÅ¼ytkownikÃ³w z ankietami, ktÃ³re wybrali do ukrycia. Rekord zawiera `user_id`, `poll_id` oraz `hidden_at`, co pozwala na filtrowanie feedu uÅ¼ytkownika.

---

## poll_boosts (promocje ankiet)

Tabela **poll_boosts** rejestruje kaÅ¼de promowanie ankiety przez uÅ¼ytkownika. Rekord skÅ‚ada siÄ™ z `user_id`, `poll_id` oraz znacznika `boosted_at`. DziÄ™ki temu moÅ¼liwe jest egzekwowanie dziennego limitu boostÃ³w i Å›ledzenie aktywnoÅ›ci promujÄ…cych.

---

## button_holds (sesje przycisku)

W tabeli **button_holds** zapisywane sÄ… sesje przytrzymania przycisku, zarÃ³wno globalnego (â€žPush It!â€), jak i opcji ankietowej. KaÅ¼da sesja ma `id`, ewentualne `user_id` (dla goÅ›ci wartoÅ›Ä‡ null), `context_type` (main_button lub poll_option), `context_id` (jeÅ›li dotyczy opcji ankiety), `device_id`, `country`, czas rozpoczÄ™cia `started_at`, czas zakoÅ„czenia `ended_at`, flagÄ™ `active` oraz `last_heartbeat_at`. DoÅ›Ä‡ szczegÃ³Å‚owo monitoruje siÄ™ aktywnoÅ›Ä‡, by obliczyÄ‡ jednoczesne przytrzymania i rekordy.

---

## user_follows (relacje obserwowania)

Tabela **user_follows** definiuje skierowane relacje obserwowania miÄ™dzy uÅ¼ytkownikami. KaÅ¼dy wpis zawiera `follower_id`, `followed_id` i `followed_at`. UsuniÄ™cie wpisu oznacza zakoÅ„czenie obserwacji.

---

## badges (definicje odznak)

Tabela **badges** przechowuje konfiguracjÄ™ dostÄ™pnych odznak: `badge_id`, `name`, `description`, `icon_path` oraz `criteria` (opis warunkÃ³w przyznawania, np. typ aktywnoÅ›ci i prÃ³g liczbowy).

---

## user_badges (przyznane odznaki)

Tabela **user_badges** wiÄ…Å¼e uÅ¼ytkownikÃ³w z odznakami. KaÅ¼dy rekord zawiera `user_id`, `badge_id` oraz `awarded_at`, co pozwala na wielokrotne przyznanie tej samej odznaki w rÃ³Å¼nych momentach.

---

# Zasady biznesowe

1. **GÅ‚osowanie:** uÅ¼ytkownik moÅ¼e oddaÄ‡ maksymalnie jeden gÅ‚os na ankietÄ™, z moÅ¼liwoÅ›ciÄ… jednokrotnej korekty.
2. **Boostowanie:** kaÅ¼dy uÅ¼ytkownik ma okreÅ›lony dzienny limit boostÃ³w, egzekwowany przez tabelÄ™ poll_boosts.
3. **Cykl Å¼ycia ankiety:** ankieta przechodzi przez statusy active â†’ expired â†’ archived.
4. **Sesje przycisku:** mechanizm heartbeat (czÄ™stotliwoÅ›Ä‡ definiowana przez zespÃ³Å‚) aktualizuje `last_heartbeat_at`, by monitorowaÄ‡ aktywne sesje.
5. **Aktualizacje w czasie rzeczywistym:** dziÄ™ki Supabase wszystkie zmiany w tabelach sÄ… natychmiast wypychane do klientÃ³w.

# System boostowania ankiet

**Boostowanie** to mechanizm pozwalajÄ…cy uÅ¼ytkownikom promowaÄ‡ ankiety i decydowaÄ‡, ktÃ³re pytania zyskajÄ… wiÄ™kszy zasiÄ™g.

1. **Pula boostÃ³w**
    - KaÅ¼dy zalogowany uÅ¼ytkownik otrzymuje **3 boosty dziennie** (lub inny ustalony limit).
    - Limit odnawia siÄ™ codziennie o pÃ³Å‚nocy UTC â€” licznik resetuje siÄ™ i uÅ¼ytkownik znÃ³w ma peÅ‚nÄ… pulÄ™.
2. **Kto moÅ¼e boostowaÄ‡?**
    - Boost dostÄ™pny jest dla kaÅ¼dej **aktywnej** ankiety.
    - UÅ¼ytkownik moÅ¼e promowaÄ‡ zarÃ³wno wÅ‚asne, jak i cudze ankiety, bez dodatkowych ograniczeÅ„.
3. **Przebieg akcji**
    - Po klikniÄ™ciu przycisku **Boost/Push** przy ankiecie:
        1. W bazie danych `push_count_cache` tej ankiety jest **inkrementowany** o 1.
        2. W profilu uÅ¼ytkownika roÅ›nie licznik wykorzystanych boostÃ³w (np. **Daily Boosts: 2/3**).
        3. Zmiana jest propagowana w **czasie rzeczywistym** â€” wszyscy klienci od razu widzÄ… nowe wartoÅ›ci i ewentualne przesuniÄ™cie w rankingu Hot.
4. **WidocznoÅ›Ä‡ i ranking**
    - Ankiety z najwyÅ¼szym `push_count_cache` pojawiajÄ… siÄ™ w zakÅ‚adce **Hot**.
    - **Popular** (wedÅ‚ug gÅ‚osÃ³w) i **New** (wedÅ‚ug czasu) nie uwzglÄ™dniajÄ… boostÃ³w.
    - DziÄ™ki temu treÅ›ci cenione przez spoÅ‚ecznoÅ›Ä‡ mogÄ… wejÅ›Ä‡ na szczyt, nawet gdy majÄ… mniej gÅ‚osÃ³w.
5. **Ograniczenia**
    - Po wyczerpaniu dziennej puli boostÃ³w kolejne klikniÄ™cie jest **zablokowane** (przycisk wyszarzony lub komunikat o braku boostÃ³w).
    - UÅ¼ytkownik moÅ¼e rozdzieliÄ‡ boosty dowolnie: wszystkie 3 na jednÄ… ankietÄ™ lub po jednym na trzy rÃ³Å¼ne.
6. **Åšledzenie i analiza**
    - KaÅ¼da akcja zapisywana jest w tabeli **poll_boosts** (user_id, poll_id, boosted_at).
    - Tabela **daily_push_limits** kontroluje reset i liczniki boostÃ³w, by banaÅ‚ przestrzegaÄ‡ limitÃ³w.
    - DziÄ™ki temu moÅ¼na generowaÄ‡ statystyki, przyznawaÄ‡ odznaki za aktywnoÅ›Ä‡ i analizowaÄ‡ zaangaÅ¼owanie.

---

**Cel mechanizmu:**

Dam uÅ¼ytkownikom narzÄ™dzie do samodzielnego promowania wartoÅ›ciowych treÅ›ci, z zachowaniem kontroli (limitÃ³w), aby uniknÄ…Ä‡ naduÅ¼yÄ‡ i zachÄ™ciÄ‡ do strategicznego wykorzystania boostÃ³w.

# Cykl Å¼ycia ankiety

KaÅ¼da ankieta w aplikacji **Push It!** przechodzi Å›ciÅ›le okreÅ›lony cykl, skÅ‚adajÄ…cy siÄ™ z nastÄ™pujÄ…cych etapÃ³w:

1. **Active (aktywny)**
    - Status nadaje siÄ™ zaraz po publikacji ankiety.
    - Ankieta jest widoczna w gÅ‚Ã³wnym feedzie (tryb Live).
    - UÅ¼ytkownicy mogÄ…:
        - oddawaÄ‡ gÅ‚osy,
        - boostowaÄ‡ ankietÄ™.
    - Czas trwania: **24 godziny** od momentu utworzenia (mierzone w UTC).
    - Wszystkie zmiany (liczniki gÅ‚osÃ³w i boostÃ³w) sÄ… synchronizowane w czasie rzeczywistym.
2. **Expired (wygasÅ‚a)**
    - Automatyczne przejÅ›cie po upÅ‚ywie okresu aktywnoÅ›ci (24h).
    - W tym stanie:
        - gÅ‚osowanie zostaje zamkniÄ™te (brak moÅ¼liwoÅ›ci oddawania nowych gÅ‚osÃ³w),
        - wyniki pozostajÄ… dostÄ™pne (dziÄ™ki real-time juÅ¼ zawierajÄ… ostateczne wartoÅ›ci).
    - Ankieta jest usuwana z listy aktywnych i czeka na archiwizacjÄ™.
3. **Archived (zarchiwizowana)**
    - Archiwizacja nastÄ™puje automatycznie krÃ³tko po wygaÅ›niÄ™ciu (np. za pomocÄ… edge function).
    - Proces archiwizacji moÅ¼e obejmowaÄ‡:
        - oznaczenie rekordu jako zarchiwizowany,
        - zapisanie danych do statystyk (Hall of Fame),
        - usuniÄ™cie niepotrzebnych poÅ‚Ä…czeÅ„ real-time.
    - Ankieta trafia do sekcji Archive (globalnie i w profilu twÃ³rcy).
    - W stanie archived:
        - wszystkie dane sÄ… dostÄ™pne do podglÄ…du: pytanie, opcje, ostateczne wyniki,
        - interakcje (gÅ‚os, boost) sÄ… zablokowane.
    - Przechowywanie: dowolnie dÅ‚ugo; moÅ¼liwe wyszukiwanie w archiwum lub prezentacja w Hall of Fame.
4. **(Opcjonalnie) RÄ™czne zakoÅ„czenie**
    - W wersji MVP funkcja nie jest dostÄ™pna.
    - Planowane rozszerzenie: umoÅ¼liwienie twÃ³rcy wczeÅ›niejszego zakoÅ„czenia ankiety.
5. **Ograniczenia**
    - TwÃ³rca nie moÅ¼e usunÄ…Ä‡ ankiety; publikacja jest trwaÅ‚a.
    - Ukrywanie ankiety dotyczy tylko feedu indywidualnego uÅ¼ytkownika (hidden_polls), nie wpÅ‚ywa na status w bazie.

**Podsumowanie cyklu:**

```
Utworzenie â†’ 24h aktywnoÅ›ci â†’ WygaÅ›niÄ™cie â†’ Archiwizacja
```

Ten schemat zapewnia:

- Å›wieÅ¼oÅ›Ä‡ treÅ›ci w trybie Live,
- uporzÄ…dkowane przechowywanie wynikÃ³w w archiwum,
- automatyzacjÄ™ procesu bez rÄ™cznej ingerencji.

# System statystyk i rankingÃ³w

System statystyk w aplikacji **Push It!** peÅ‚ni dwie gÅ‚Ã³wne role:

1. **BieÅ¼Ä…cy monitoring aktywnoÅ›ci** â€“ prezentacja danych w czasie rzeczywistym lub z okreÅ›lonymi przedziaÅ‚ami czasu.
2. **Elementy grywalizacji** â€“ rankingi, rekordy i wyrÃ³Å¼nienia wspierajÄ…ce motywacjÄ™ uÅ¼ytkownikÃ³w.

PoniÅ¼ej opis poszczegÃ³lnych komponentÃ³w i planowanych rozszerzeÅ„.

---

## 1. Statystyki dzienne (Daily)

- **Zakres danych:**
    - liczba ankiet utworzonych danego dnia,
    - liczba unikalnych uÅ¼ytkownikÃ³w, ktÃ³rzy oddali gÅ‚os w ciÄ…gu ostatnich 24h,
    - liczba wciÅ›niÄ™Ä‡ globalnego przycisku (â€žButton Presses 24hâ€).
- **Prezentacja (MVP):** ekran **Stats** pokazuje licznik przyciÅ›niÄ™Ä‡ przycisku w ostatniej dobie.
- **Planowana funkcja:** sekcja **â€œTodayâ€™s Highlightsâ€**, np.:
    - Dzisiejsze ankiety: 5
    - Dzisiejsze gÅ‚osy: 120
    - Nowi uÅ¼ytkownicy: 10
- **Reset:** statystyki resetujÄ… siÄ™ codziennie o pÃ³Å‚nocy UTC.

---

## 2. Statystyki miesiÄ™czne (Monthly)

- **Zakres danych:**
    - liczba ankiet utworzonych w danym miesiÄ…cu,
    - liczba gÅ‚osÃ³w oddanych w miesiÄ…cu,
    - najbardziej aktywny uÅ¼ytkownik (np. utworzyÅ‚ X ankiet).
- **Zastosowania:**
    - comiesiÄ™czne wyrÃ³Å¼nienia i odznaki (np. â€žNajlepszy twÃ³rca miesiÄ…caâ€).
- **Interfejs:**
    - dedykowana zakÅ‚adka lub filtr na ekranie **Stats**,
    - moÅ¼liwoÅ›Ä‡ przeglÄ…dania danych z poprzednich miesiÄ™cy i porÃ³wnaÅ„ M/M.

---

## 3. Rekordy i Hall of Fame

- **Åšledzone rekordy:**
    - jednoczesne wciÅ›niÄ™cia przycisku (All-Time Record),
    - rekord gÅ‚osÃ³w w pojedynczej ankiecie,
    - rekord boostÃ³w na ankiecie,
    - rekord liczby ankiet utworzonych przez jednego uÅ¼ytkownika.
- **Hall of Fame:**
    - lista rekordowych wynikÃ³w z opisami (np. â€žNajpopularniejsza ankieta: X â€“ 500 gÅ‚osÃ³wâ€),
    - tabela liderÃ³w (np. top 10 twÃ³rcÃ³w, top 10 gÅ‚osujÄ…cych, top 10 boosterÃ³w).

---

## 4. Rankingi uÅ¼ytkownikÃ³w

ChoÄ‡ niezaimplementowane w MVP, planowany system rankingowy oparty na statystykach personalnych:

- **Kryteria rankingÃ³w:**
    - liczba utworzonych ankiet,
    - liczba oddanych gÅ‚osÃ³w,
    - liczba zdobytych odznak,
    - skutecznoÅ›Ä‡ boostÃ³w (np. ile boostÃ³w przeÅ‚oÅ¼yÅ‚o siÄ™ na gÅ‚osy).
- **Perspektywy:**
    - rankingi miesiÄ™czne (reset co 30 dni, z przyznawaniem odznak),
    - rankingi globalne (caÅ‚kowite dorobki, dla Hall of Fame).

---

## 5. Prezentacja statystyk

- **Ekran Stats:** gÅ‚Ã³wne miejsce agregacji danych.
- **Profile uÅ¼ytkownikÃ³w:** wyÅ›wietlanie statystyk personalnych (np. ankiety utworzone, gÅ‚osy oddane, odznaki).
- **Widgety na feedzie:** moÅ¼liwe wyrÃ³Å¼nienia, np. â€žUÅ¼ytkownik dniaâ€.
- **Real-time:** dynamiczne odÅ›wieÅ¼anie wybranych licznikÃ³w (np. online users, Button Presses).

---

> WiÄ™kszoÅ›Ä‡ statystyk opiera siÄ™ na danych zgromadzonych w tabelach polls, user_votes, profiles i button_holds. Rozbudowa to gÅ‚Ã³wnie agregacja i czytelna prezentacja tych informacji.
> 

# Gamifikacja (odznaki i osiÄ…gniÄ™cia)

# Odznaki

[Odznaki](Odznaki%2023e35605529c8069beffebf9b56826f1.csv)

# System odznak

Aby zwiÄ™kszyÄ‡ zaangaÅ¼owanie, **Push It!** wprowadza **system odznak**, przyznawanych za kluczowe aktywnoÅ›ci. Odznaki sÄ… wyÅ›wietlane w profilu uÅ¼ytkownika w sekcji **â€žYour Badges!â€** â€” klikniÄ™cie otwiera listÄ™ zdobytych odznak z ikonÄ…, nazwÄ… i opisem warunkÃ³w przyznania.

## Kategorie odznak

1. **AktywnoÅ›Ä‡ ankietowa**
    - **TwÃ³rca ankiet**: za utworzenie okreÅ›lonej liczby ankiet, np.:
        - â€žPierwsza ankietaâ€
        - â€žTwÃ³rca 10 ankietâ€
        - â€žTwÃ³rca 50 ankietâ€
    - **PopularnoÅ›Ä‡ ankiet**: za zebranie progu gÅ‚osÃ³w, np.:
        - â€žPopularna ankietaâ€ (100 gÅ‚osÃ³w)
        - â€žViralowa ankietaâ€ (1â€¯000 gÅ‚osÃ³w)
    - **UdziaÅ‚ w gÅ‚osowaniu**: za aktywnoÅ›Ä‡ gÅ‚osujÄ…c, np.:
        - â€žPierwszy gÅ‚osâ€
        - â€žAktywny gÅ‚osujÄ…cyâ€ (100 oddanych gÅ‚osÃ³w)
2. **Boosty i interakcje**
    - **UÅ¼yty boost**:
        - â€žBoosterâ€ (pierwszy boost)
        - â€žSuper Boosterâ€ (10 boostÃ³w uÅ¼ytych)
    - **Otrzymane boosty**:
        - â€žPrawdziwa rakietaâ€ (50 boostÃ³w otrzymanych)
3. **Relacje spoÅ‚eczne**
    - **ObserwujÄ…cy**:
        - â€žInfluencerâ€ (10 followersÃ³w)
        - â€žGwiazdaâ€ (100 followersÃ³w)
    - **Obserwuje innych**:
        - â€žOdkrywcaâ€ (10 following)
4. **WyrÃ³Å¼nienia miesiÄ™czne**
    - Przyznawane cyklicznie za aktywnoÅ›Ä‡ w danym miesiÄ…cu:
        - Najlepsi twÃ³rcy ankiet
        - Najaktywniejsi gÅ‚osujÄ…cy
        - NajwiÄ™ksi boosterzy
        - NajwiÄ™kszy przyrost followersÃ³w
    - Po zakoÅ„czeniu miesiÄ…ca trofea pozostajÄ… w profilu jako pamiÄ…tka.

## Struktura bazy danych

- **badges** â€” definicje odznak:
    - `badge_id`, `name`, `description`, `icon_path`, `criteria` (np. typ aktywnoÅ›ci i prÃ³g liczbowy)
- **user_badges** â€” przypisania uÅ¼ytkownikÃ³w do odznak:
    - `user_id`, `badge_id`, `awarded_at` (data przyznania)

## RozszerzalnoÅ›Ä‡

System odznak jest elastyczny:

- MoÅ¼liwoÅ›Ä‡ dodawania nowych kategorii i progÃ³w bez modyfikacji istniejÄ…cej struktury.
- W przyszÅ‚oÅ›ci moÅ¼na wprowadziÄ‡ odznaki za kolejne aktywnoÅ›ci lub zmienne mechanizmy przyznawania (np. za oszczÄ™dzanie boostÃ³w czy udziaÅ‚ w wyzwaniach).

# Widok pojedynczej ankiety

Na ekranie pojedynczej ankiety uÅ¼ytkownik zobaczy wszystkie niezbÄ™dne elementy do przeglÄ…dania i udziaÅ‚u w gÅ‚osowaniu:

---

## 1. NagÅ‚Ã³wek ankiety

- **Pytanie** â€“ wyÅ›wietlone duÅ¼Ä… czcionkÄ… u gÃ³ry ekranu.
- **Autor** â€“ jeÅ›li `is_anonymous = false`, poniÅ¼ej pytania wyÅ›wietla siÄ™ informacja â€žutworzona przez [username]â€. W przeciwnym razie pole jest pomijane.

---

## 2. Opcje odpowiedzi

1. **Stan przed gÅ‚osowaniem** (uÅ¼ytkownik zalogowany i ankieta aktywna):
    - Lista opcji z przyciskami lub radio buttonami.
    - UÅ¼ytkownik wybiera jednÄ… opcjÄ™ i przytrzymuje/przyciska przycisk **Vote**.
2. **Stan po gÅ‚osowaniu** lub **wygasÅ‚a ankieta**:
    - KaÅ¼da opcja wyÅ›wietlana jest z paskiem postÄ™pu (lub liczbÄ… gÅ‚osÃ³w i procentem).
    - Opcja wybrana przez uÅ¼ytkownika jest **wyrÃ³Å¼niona** (podÅ›wietlona).
    - W przypadku maÅ‚ej liczby gÅ‚osÃ³w procenty mogÄ… mieÄ‡ jedno miejsce po przecinku.

---

## 3. Podsumowanie statystyk

- **Licznik gÅ‚osÃ³w** â€“ suma oddanych gÅ‚osÃ³w (np. â€ž20 gÅ‚osÃ³w oddanychâ€).
- **WskaÅºnik boostÃ³w** â€“ liczba boostÃ³w (np. â€žBoosty: 5â€).

---

## 4. Przyciski akcji

- **Vote / Change Vote**
    - Etykieta zmienia siÄ™ zaleÅ¼nie od stanu:
        - â€žGÅ‚osujâ€ (jeszcze nie gÅ‚osowano)
        - â€žZmieÅ„ gÅ‚osâ€ (po edycji, jeÅ›li ankieta nadal aktywna)
    - Po wygaÅ›niÄ™ciu ankiety przycisk znika lub staje siÄ™ nieaktywny.
- **Boost** (ikona rakiety)
    - Promuje ankietÄ™, dziaÅ‚ajÄ…c identycznie jak w feedzie.
    - JeÅ›li uÅ¼ytkownik wykorzystaÅ‚ dzienny limit, przycisk jest wyszarzony.
- **Save** (ikona gwiazdki)
    - Dodaje ankietÄ™ do ulubionych (`saved_polls`).
- **Hide** (ikona przekreÅ›lonego oka)
    - Ukrywa ankietÄ™ z feedu danego uÅ¼ytkownika (`hidden_polls`).
- **Share** (planowane)
    - Opcja skopiowania linku lub udostÄ™pnienia na zewnÄ…trz.

---

## 5. Status i odliczanie czasu

- **Licznik pozostaÅ‚ego czasu** (gdy aktywna): â€žPozostaÅ‚o 5h 12mâ€.
- **Informacja o zakoÅ„czeniu** (po wygaÅ›niÄ™ciu): â€žAnkieta zakoÅ„czona dnia YYYYâ€‘MMâ€‘DDâ€.

---

## 6. Routing i dostÄ™pnoÅ›Ä‡

- **WejÅ›cie:**
    - KlikniÄ™cie karty ankiety w feedzie lub w liÅ›cie uÅ¼ytkownika.
    - BezpoÅ›redni link (publiczny URL).
- **Tryb goÅ›cia (niezalogowany):**
    - Opcje nieaktywne lub wyÅ›wietlany komunikat â€žZaloguj siÄ™, aby zagÅ‚osowaÄ‡â€.
    - Wyniki sÄ… zawsze widoczne.

---

## 7. Real-time updates

- Subskrypcja zmian w bazie (Supabase real-time):
    - Nowe gÅ‚osy i boosty od razu aktualizujÄ… liczniki.
    - Zmiana statusu ankiety (active â†’ expired) automatycznie przeÅ‚Ä…cza interfejs.
- Podczas gÅ‚osowania:
    - GÅ‚os rejestrowany natychmiast, a wyniki aktualizowane z uwzglÄ™dnieniem wÅ‚asnego gÅ‚osu.

---

> Podsumowanie: Ten ekran zapewnia peÅ‚nÄ… interakcjÄ™ z pojedynczÄ… ankietÄ… â€” od gÅ‚osowania po podglÄ…d wynikÃ³w i statystyk, z dynamicznÄ… synchronizacjÄ… i zachowaniem dostÄ™pnoÅ›ci zarÃ³wno dla zalogowanych, jak i goÅ›ci.
> 

# System czasu (strefy czasowe i odliczanie)

Aplikacja **Push It!** stosuje spÃ³jny system czasu oparty o strefÄ™ **UTC** dla wszystkich operacji i zapisÃ³w czasowych. UmoÅ¼liwia to unikniÄ™cie nieporozumieÅ„ zwiÄ…zanych ze strefami lokalnymi i zmianÄ… czasu letniego.

---

## 1. Zapis i przechowywanie czasÃ³w

- Wszystkie znaczniki czasu (`created_at`, `expires_at`, `last_heartbeat_at` itp.) sÄ… zapisywane w **UTC** z precyzjÄ… co do sekundy.
- PrzykÅ‚ad: `expires_at = created_at + 24h` w UTC.

---

## 2. Czas trwania ankiety

- Standardowy okres aktywnoÅ›ci ankiety: **24 godziny** od momentu utworzenia.
- Obliczenie: `expires_at` = `created_at` + 24h (UTC).
- WyÅ›wietlanie lokalne: urzÄ…dzenie konwertuje UTC na czas lokalny wyÅ‚Ä…cznie w celu wyÅ›wietlenia, ale wewnÄ™trzne kalkulacje bazujÄ… zawsze na UTC.

---

## 3. Odliczanie czasu (frontâ€‘end)

- Interfejs pokazuje **pozostaÅ‚y czas** w formacie wzglÄ™dnym, np.:
    - â€ž23hâ€ (godzin),
    - â€ž5 min leftâ€ (minut).
- Obliczenia wykonuje siÄ™ jako rÃ³Å¼nicÄ™ miÄ™dzy lokalnym czasem urzÄ…dzenia (po przeliczeniu na UTC) a `expires_at`.
- DziÄ™ki temu uÅ¼ytkownik widzi zawsze ten sam wynik, niezaleÅ¼nie od strefy czasu.

---

## 4. Resety cykli dziennych

- Mechanizmy oparte o dobÄ™ (reset boostÃ³w, statystyki dzienne) opierajÄ… siÄ™ na **dobie UTC**.
- Nowy dzieÅ„ rozpoczyna siÄ™ o **00:00:00 UTC** â€” to punkt odniesienia dla wszystkich uÅ¼ytkownikÃ³w.
- Dla uÅ¼ytkownikÃ³w w innych strefach reset moÅ¼e przypadaÄ‡ na innÄ… godzinÄ™ lokalnÄ… (np. 1:00 CET, 2:00 CEST).

---

## 5. WyÅ›wietlanie dat i godzin

- Aplikacja unika pokazywania â€žsurowychâ€ dat/godzin w UTC bez przeliczenia.
- Preferowane sÄ…:
    - odliczanie wzglÄ™dne (â€žpozostaÅ‚o X czasuâ€),
    - format ISO 8601 z oznaczeniem `Z` (jeÅ›li trzeba podaÄ‡ konkretnÄ… datÄ™).
- Tam, gdzie pokazuje siÄ™ data zakoÅ„czenia (np. w archiwum), moÅ¼e byÄ‡ wyÅ›wietlana w lokalnym czasie urzÄ…dzenia.

---

## 6. Synchronizacja realâ€‘time

- DziÄ™ki jednolitej bazie czasowej UTC subskrypcje realâ€‘time (Supabase) dziaÅ‚ajÄ… niezaleÅ¼nie od lokalizacji serwera lub klienta.
- Warunki czasowe (np. wygaszenie ankiety) sprawdzane sÄ… przy uÅ¼yciu UTC, co zapewnia spÃ³jnoÅ›Ä‡ wszystkich zdarzeÅ„.

---

> Podsumowanie: Korzystanie z UTC upraszcza implementacjÄ™, zapobiega bÅ‚Ä™dom wynikajÄ…cym z rÃ³Å¼nych stref i zapewnia, Å¼e wszyscy uÅ¼ytkownicy widzÄ… jednolite czasy i odliczenia.
> 

# PrzyszÅ‚e funkcje (Roadmapa)

PoniÅ¼ej znajduje siÄ™ plan rozwoju aplikacji **Push It!** â€” zestaw priorytetowych funkcji i usprawnieÅ„, ktÃ³re majÄ… trafiÄ‡ do kolejnych wersji.

---

## 1. Plan pÅ‚atny (Premium)

Wprowadzenie modelu abonamentowego lub jednorazowej opÅ‚aty, odblokowujÄ…cej dodatkowe moÅ¼liwoÅ›ci.

- **ZwiÄ™kszony limit boostÃ³w:** np. 10 boostÃ³w/dzieÅ„ zamiast 3.
- **DÅ‚uÅ¼szy czas trwania ankiet:** opcja 3â€‘dniowych lub tygodniowych ankiet.
- **WiÄ™cej opcji odpowiedzi:** moÅ¼liwoÅ›Ä‡ dodania > 10 opcji.
- **Zaawansowane statystyki:** wykresy, demografia gÅ‚osujÄ…cych, porÃ³wnania.
- **Personalizacja profilu:** wÅ‚asny avatar, tÅ‚o, wyrÃ³Å¼nienie w rankingach.
- **Brak reklam:** w przypadku wprowadzenia reklam w wersji darmowej.
- **Wczesny dostÄ™p (beta):** testowanie nowych funkcji przed release.
- **Struktura wsparcia:** w profilu pole `is_premium` i mechanizmy sprawdzajÄ…ce uprawnienia.

---

## 2. Kategorie ankiet

Lepsza organizacja treÅ›ci poprzez tagowanie ankiet tematami.

- **Definicja kategorii:** Technologie, Sport, Rozrywka, Nauka, Opinie itp.
- **Podczas tworzenia:** wybÃ³r 1â€“3 kategorii dla ankiety.
- **Filtrowanie:** feed z zakÅ‚adkami lub filtrami wedÅ‚ug kategorii.
- **Rankingi w kategoriach:** lista najpopularniejszych ankiet w danym temacie.
- **Zmiany w bazie:** nowe pole `categories` w tabeli polls i sÅ‚ownik kategorii.

---

## 3. Lepsze filtrowanie i moderacja

NarzÄ™dzia porzÄ…dkujÄ…ce i chroniÄ…ce spoÅ‚ecznoÅ›Ä‡.

- **Filtrowanie po jÄ™zyku:** wybÃ³r ankiet w znanych jÄ™zykach.
- **Wyszukiwarka ankiet:** wyszukiwanie po sÅ‚owach kluczowych.
- **Algorytmiczny feed:** personalizowany ranking na podstawie aktywnoÅ›ci i znajomoÅ›ci kategorii/autorÃ³w.
- **ZgÅ‚aszanie ankiet:** opcja "ZgÅ‚oÅ›" dla uÅ¼ytkownikÃ³w + panel moderacyjny.
- **Automatyczne ukrywanie:** przy przekroczeniu progu zgÅ‚oszeÅ„ ankieta tymczasowo znika dla wszystkich.

---

## 4. Zaawansowane statystyki i analizy

Rozbudowa sekcji Stats i profile uÅ¼ytkownikÃ³w o szczegÃ³Å‚owe dane.

- **Wykresy przyrostu gÅ‚osÃ³w:** analiza czasu (skoki po boostach).
- **Mapa geograficzna:** pochodzenie gÅ‚osujÄ…cych (pole `country`).
- **Breakdown demograficzny:** pÅ‚eÄ‡, wiek, jeÅ›li zbierzemy dodatkowe dane.
- **PorÃ³wnania ankiet:** korelacje miÄ™dzy wynikami rÃ³Å¼nych pytaÅ„.
- **Publiczne API:** dostÄ™p do agregowanych statystyk dla spoÅ‚ecznoÅ›ci (boty, dashboardy).

---

## 5. Interakcje spoÅ‚eczne

Nowe sposoby angaÅ¼owania uÅ¼ytkownikÃ³w i budowania relacji.

- **Komentarze pod ankietÄ…:** dyskusje, uzasadnienia wyborÃ³w.
- **System obserwowania:** powiadomienia o nowych ankietach od Å›ledzonych osÃ³b.
- **Tryb quizu:** quizy/trivia z poprawnÄ… odpowiedziÄ… ujawnianÄ… po gÅ‚osowaniu.

---

## 6. Usprawnienia UX/UI

Szereg drobnych, ale waÅ¼nych usprawnieÅ„ w interfejsie.

- **Animowane wizualizacje wynikÃ³w:** pÅ‚ynne sÅ‚upki i procenty.
- **Powiadomienia push:** informujÄ…ce o zakoÅ„czeniu ankiety, milestoneâ€™ach i zaproszeniach.
- **Tryb ciemny:** dark mode.
- **PeÅ‚na lokalizacja:** tÅ‚umaczenie interfejsu na polski i inne jÄ™zyki.
- **Optymalizacja wydajnoÅ›ci:** skalowalnoÅ›Ä‡ real-time przy duÅ¼ym ruchu.

---

> Roadmapa bÄ™dzie aktualizowana zgodnie z feedbackiem od uÅ¼ytkownikÃ³w i potrzebami biznesu. Fundament (ankiety, gÅ‚osowanie, real-time, boosty) pozostaje stabilny, a kolejne funkcje bÄ™dÄ… rozwijane moduÅ‚owo.
> 

# Wymagania projektowe (UI/UX)

# Zasady projektowe UI

Podczas tworzenia aplikacji **Push It!** przyjÄ™to kilka kluczowych zasad, ktÃ³re zapewniajÄ… spÃ³jny, intuicyjny i wygodny interfejs.

---

## 1. SpÃ³jnoÅ›Ä‡ designu

- **Jednolita stylistyka:** kolory, czcionki, ikony i przyciski sÄ… konsekwentnie stosowane na wszystkich ekranach.
- **StaÅ‚e znaczenie elementÃ³w:** ikony takie jak rakieta (boost) czy przycisk gÅ‚osowania zachowujÄ… ten sam wyglÄ…d i funkcjÄ™ w kaÅ¼dym kontekÅ›cie.
- **Minimalizm:** interfejs skupia siÄ™ na treÅ›ci (pytaniach i odpowiedziach), eliminujÄ…c niepotrzebne ozdobniki.

---

## 2. StaÅ‚e dolne menu nawigacyjne

- **Persistent bottom navigation:** piÄ™Ä‡ gÅ‚Ã³wnych ikon (The Button, Vote, Create, Stats, My App) jest widocznych zawsze na dole ekranu.
- **WyraÅºny stan:** aktywna sekcja jest podÅ›wietlana, co uÅ‚atwia orientacjÄ™.
- **DostÄ™pnoÅ›Ä‡:** uÅ¼ytkownik nigdy nie traci dostÄ™pu do gÅ‚Ã³wnej nawigacji, nawet w podsekcjach.

---

## 3. Modalne okna zamiast peÅ‚nych ekranÃ³w

- **KrÃ³tkie akcje:** tworzenie ankiety, formularze i komunikaty pojawiajÄ… siÄ™ jako wyskakujÄ…ce modale lub panele.
- **Zachowanie kontekstu:** tÅ‚o pozostaje widoczne z przyciemnieniem â€” uÅ¼ytkownik wie, skÄ…d pochodzi modal i moÅ¼e Å‚atwo anulowaÄ‡ akcjÄ™.
- **PeÅ‚ne widoki dla treÅ›ci:** dÅ‚ugie listy i statystyki sÄ… wyÅ›wietlane jako osobne ekrany.

---

## 4. CzytelnoÅ›Ä‡ i prostota

- **Drukowalne pytania:** ankiety eksponowane wiÄ™kszÄ… czcionkÄ….
- **Interaktywne przyciski:** opcje odpowiedzi majÄ… odpowiednie odstÄ™py, by uniknÄ…Ä‡ pomyÅ‚ek.
- **Wysoki kontrast:** dobÃ³r kolorÃ³w zapewnia czytelnoÅ›Ä‡ nawet na jasnym Å›wietle lub w trybie wysokiego kontrastu.

---

## 5. ResponsywnoÅ›Ä‡ i adaptacja

- **Skalowanie na rÃ³Å¼ne urzÄ…dzenia:** interfejs dostosowuje siÄ™ do tabletÃ³w i desktopÃ³w (np. wielokolumnowe ukÅ‚ady).
- **Przygotowanie na web:** kod i styl sÄ… gotowe do implementacji wersji przeglÄ…darkowej.

---

## 6. Intuicyjne ikony i etykiety

- **WspierajÄ…ce tooltipy:** ikony wyÅ›wietlajÄ… etykiety lub podpowiedzi po najechaniu/wskazaniu.
- **JÄ™zyk interfejsu:** prosty i spÃ³jny, aktualnie w wersji angielskiej, planowane peÅ‚ne tÅ‚umaczenia na polski i inne jÄ™zyki.

---

## 7. Zachowanie stanu miÄ™dzy ekranami

- **PamiÄ™Ä‡ scrolla i filtrÃ³w:** powrÃ³t do feedu przywraca poprzedniÄ… pozycjÄ™ listy i wybrane filtry.
- **Brak odÅ›wieÅ¼ania:** uÅ¼ytkownik nie traci kontekstu po przeskokach miÄ™dzy zakÅ‚adkami.

---

> Filozofia projektowa: maksimum treÅ›ci, minimum przeszkÃ³d â€” nowy uÅ¼ytkownik szybko zrozumie, jak korzystaÄ‡, a staÅ‚y doceni pÅ‚ynnoÅ›Ä‡ i spÃ³jnoÅ›Ä‡ doÅ›wiadczenia.
> 

# 

---

## Project tasks

[Tasks](Tasks%201db35605529c80518c85d0472cafb4bf.csv)